"use strict";(()=>{var e={};e.id=788,e.ids=[788],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},741:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>v,patchFetch:()=>g,requestAsyncStorage:()=>f,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>h});var n={};r.r(n),r.d(n,{GET:()=>l});var u=r(5419),a=r(9108),o=r(9678),i=r(8070),s=r(3205);async function l(e){let t=(0,s.v6)(e);return t?i.Z.json({ok:!0,user:{username:t.username,role:t.role}}):i.Z.json({ok:!1,error:"Unauthorized."},{status:401})}let p=new u.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/me/route",pathname:"/api/auth/me",filename:"route",bundlePath:"app/api/auth/me/route"},resolvedPagePath:"/Users/ameralyasin/Desktop/cam analysis/app/api/auth/me/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:c,serverHooks:d,headerHooks:m,staticGenerationBailout:h}=p,v="/api/auth/me/route";function g(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:c})}},3205:(e,t,r)=>{r.d(t,{Gv:()=>m,YD:()=>d,Zk:()=>c,ed:()=>p,v6:()=>f});var n=r(6113),u=r.n(n);let a="session",o=()=>process.env.AUTH_SECRET||"dev-secret",i=e=>Buffer.from(e).toString("base64url"),s=e=>Buffer.from(e,"base64url").toString("utf8"),l=e=>u().createHmac("sha256",o()).update(e).digest("base64url");function p(e,t){let r=Date.now()+432e5,n=i(JSON.stringify({username:e,role:t,exp:r}));return{token:`${n}.${l(n)}`,exp:r}}function f(e){var t;return function(e){if(!e)return null;let[t,r]=e.split(".");if(!t||!r||l(t)!==r)return null;try{let e=JSON.parse(s(t));if(!e?.exp||Date.now()>e.exp)return null;return e}catch{return null}}(((t=e.headers.get("cookie"))?t.split(";").reduce((e,t)=>{let[r,...n]=t.trim().split("=");return r&&(e[r]=decodeURIComponent(n.join("="))),e},{}):{})[a])}function c(){return a}function d(){return 43200}function m(e,t){let[r,n,a,o]=t.split("$");if("pbkdf2"!==r||!n||!a||!o)return!1;let i=Number(n);if(!Number.isFinite(i)||i<=0)return!1;let s=u().pbkdf2Sync(e,a,i,32,"sha256").toString("hex");return u().timingSafeEqual(Buffer.from(o,"hex"),Buffer.from(s,"hex"))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206],()=>r(741));module.exports=n})();